name: Build Liberty image with war file
run-name: ${{ github.actor }} triggered build
on: [push]
jobs:
  build-war-file:
    # Default token permissions
    permissions:
      contents: write
      packages: write
    runs-on: ubuntu-latest
    #container: 
      #image: icr.io/appcafe/websphere-liberty:kernel-java8-ibmjava-ubi
     # env:
      #  USERNAME: ${{ github.actor }}
       # TOKEN: ${{ secrets.GITHUB_TOKEN }}
    steps:
      # Clone repository
      - uses: actions/checkout@v4
      # Run the gradle build to create the war file using the gradle wrapper
      # The build creates the war file
      - name: gradlew-build-and-publish-barfile
        run: |
          ./gradlew --no-daemon war
          cp build/libs/*.war .
